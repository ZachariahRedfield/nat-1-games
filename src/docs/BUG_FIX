# BUG_FIX: Implement a Bug Fix (with Tests)

This workflow implements fixes.
If the task is exploratory, redirect to BUG_REPORTER.md.

## Required reading
- src/docs/ARCHITECTURE.md
- src/docs/Codex.md
- src/docs/CODEX_CHECKLIST.md
- src/docs/Codex.Testing.md
- src/docs/doc-sync.yml

## FIX contract
1) Fix exactly ONE bug (or multiple only if they share a root cause).
2) Implement the fix at the root cause (no UI hacks).
3) Add at least 1 focused unit regression test (node:test) when feasible.
   - Prefer testing pure logic/services/hooks.
   - If not feasible, explain why and provide a manual regression checklist.
4) Run verification:
   - npm run verify:fast
   - npm run verify
5) Add a changelog entry **only if behavior changed**.

## Output required
- Root cause explanation
- Fix summary
- Tests added (or justification)
- Verification results
- Manual regression checklist
- CODEX_CHECKLIST status

Do not claim completion unless all applicable checklist items pass.

### Verification fallback (required when toolchain is unavailable)
If `npm run verify:fast` or `npm run verify` cannot be run due to environment/toolchain limitations:
- Clearly label verification as **BLOCKED (environment)**, not failed.
- Still run any available tests (node:test for touched modules).
- Provide the exact local commands required to complete verification:
  - npm install
  - npm run verify:fast
  - npm run verify
  - npm run test:e2e (if relevant)
- Do not claim completion; claim “ready pending local verification.”
